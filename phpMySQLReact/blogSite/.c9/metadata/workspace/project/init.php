{"filter":false,"title":"init.php","tooltip":"/project/init.php","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":35,"column":2},"action":"insert","lines":["<?php","","    session_start();","    ","    if(!isset($_SESSION['username'])){","        $response = array('result' => 'notLoggedIn');","        print(json_encode($response));","        exit();","    }","    ","    $username = $_SESSION['username'];","    ","    try {","        $dbh = new PDO(\"mysql:host=localhost;dbname=project\", 'root', null);","        $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);","        $stmt = $dbh->prepare('SELECT blogtext FROM users WHERE username=:username');","        $stmt->bindParam(':username',$username);","        $stmt->execute();","        if($stmt->rowCount() == 0){","            $response = array('result' => 'failure');","            exit();","        }","        $row = $stmt->fetch();","        $blogText = $row['blogtext'];","        ","    } ","    catch (PDOException $e) {","        $response = array('result' => 'error','msg' => $e->getMessage());","        print(json_encode($response));","        exit();","    }","","    $response = array('result' => 'LoggedIn' ,'blogText' => $blogText);","    //console.log($clickCount);","    print(json_encode($response));","?>"],"id":1}],[{"start":{"row":3,"column":0},"end":{"row":3,"column":4},"action":"remove","lines":["    "],"id":4}],[{"start":{"row":3,"column":4},"end":{"row":4,"column":0},"action":"remove","lines":["",""],"id":3}],[{"start":{"row":4,"column":0},"end":{"row":9,"column":4},"action":"remove","lines":["    if(!isset($_SESSION['username'])){","        $response = array('result' => 'notLoggedIn');","        print(json_encode($response));","        exit();","    }","    "],"id":2}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":6,"column":38},"end":{"row":6,"column":38},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":119,"mode":"ace/mode/php"}},"timestamp":1465788977616,"hash":"e2ce63afa62ea8bfe92b1fc83604bfc515ada2c9"}