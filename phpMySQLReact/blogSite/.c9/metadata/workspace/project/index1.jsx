{"filter":false,"title":"index1.jsx","tooltip":"/project/index1.jsx","undoManager":{"mark":65,"position":65,"stack":[[{"start":{"row":44,"column":0},"end":{"row":206,"column":61},"action":"remove","lines":["var LogoutButton = React.createClass({","    onLogout: function(){","        ajax('logout.php',null, function(response){","            if(response.result === 'error') {","                alert('Error: ' + response.msg);","            } else {","                this.props.onLogout();","            }","                ","        }.bind(this));","    },","    render: function(){","        return (","            <div>","                <input type='submit' value='Logout' onClick={this.onLogout}/> <br/>","            </div>","        );","    }","});","","","var LoginForm = React.createClass({","    getInitialState: function(){","        return{","            username: 'alice',","            password: '1234'","        };  ","    },","    onUsernameChange: function(e){","        this.setState({username: e.target.value});","    },","    onPasswordChange: function(e){","        this.setState({password: e.target.value});","    },","    onSubmit: function(e){","        //send ajax request to the server","        ajax('login.php',{username: this.state.username, password: this.state.password}, function(response){","            if(response.result === 'failure'){","                alert('Bad username or password');","            }","            else if(response.result === 'success'){","                this.props.onLogin(response.clickCount);","            }","            else if(response.result === 'error'){","                alert('Error: ' + response.msg);","            }","            else{","                alert('Response message has no result attribute');","            }","        }.bind(this));","    },","    render: function() {","        return (","            <div>","                <UserList/>","                Username: <input type='text' value={this.state.username} onChange={this.onUsernameChange}/> <br/>","                Password: <input type='password' value={this.state.password} onChange={this.onPasswordChange}/> <br/>","                    <input type='submit' value='Login' onClick={this.onSubmit}/> <br/>","            </div>","        );","    }","});","","var ClickButton = React.createClass({","    onClick: function(){","        ajax('viewblog.php',null, function(response){","            if(response.result === 'success'){","                this.props.setClicks(response.blog_text);","            }","            else if(response.result === 'error'){","                alert('Error: ' + response.msg);","            }","            else{","                alert('Response message has no result attribute');","            }","        }.bind(this));","    },","    render: function(){","        return <input type='submit' value='Click Me' onClick = {this.onClick}/>;","    }","});","","var LoadingScreen = React.createClass({","    render: function(){","        return <div>Loading...</div>;","    }","});","","var ClickScreen = React.createClass({","    render: function(){","        return(","            <div>","                <div>Click count: {this.props.clickCount}</div>","                <ClickButton setClicks={this.props.setClicks}/>","                <LogoutButton onLogout={this.props.onLogout}/>","            </div>","        );","    }","    ","});","","var LoginScreen = React.createClass({","    render: function(){","        return <LoginForm onLogin={this.props.onLogin}/>;","    }","});","","var App = React.createClass({","    getInitialState: function(){","        return {","            loading: true,","            clickCount: null","        };","    },","    componentDidMount: function(){","        ajax('init.php',null,function(response){","            if(response.result === 'error'){","                alert('Error: ' + response.msg);","            }","            else if(response.result === 'loggedIn'){","                this.setState({clickCount: response.clickCount,loading: false});","            }","            else if(response.result === 'notLoggedIn'){","                this.setState({clickCount: null,loading: false});","            }","            else{","                alert('Something went wrong');","            }","        }.bind(this));  ","    },","    onLogin: function(clickCount){","        this.setState(","            {clickCount: clickCount}  ","        );  ","    },","    onLogout: function(){","        this.setState(","            {clickCount: null}  ","        );  ","    },","    setClicks: function(clickCount){","        this.setState({clickCount: clickCount});","    },","    render: function() {","        if(this.state.loading){","            return<LoadingScreen />;","        }","        else if(this.state.clickCount === null){","            return <LoginScreen onLogin={this.onLogin}/>;","        }","        else{","            return(","                <ClickScreen ","                    setClicks={this.setClicks}","                    onLogout={this.onLogout} ","                    clickCount={this.state.clickCount}","                />","            );","        }","    }","});","","ReactDOM.render(<App />, document.getElementById('content'));"],"id":4321},{"start":{"row":44,"column":0},"end":{"row":205,"column":61},"action":"insert","lines":["var LogoutButton = React.createClass({","    onLogout: function(){","        ajax('logout.php',null, function(response){","            if(response.result === 'error') {","                alert('Error: ' + response.msg);","            } else {","                this.props.onLogout();","            }","                ","        }.bind(this));","    },","    render: function(){","        return (","            <div>","                <input type='submit' value='Logout' onClick={this.onLogout}/> <br/>","            </div>","        );","    }","});","","","var LoginForm = React.createClass({","    getInitialState: function(){","        return{","            username: 'alice',","            password: '1234'","        };  ","    },","    onUsernameChange: function(e){","        this.setState({username: e.target.value});","    },","    onPasswordChange: function(e){","        this.setState({password: e.target.value});","    },","    onSubmit: function(e){","        //send ajax request to the server","        ajax('login.php',{username: this.state.username, password: this.state.password}, function(response){","            if(response.result === 'failure'){","                alert('Bad username or password');","            }","            else if(response.result === 'success'){","                this.props.onLogin(response.clickCount);","            }","            else if(response.result === 'error'){","                alert('Error: ' + response.msg);","            }","            else{","                alert('Response message has no result attribute');","            }","        }.bind(this));","    },","    render: function() {","        return (","            <div>","                Username: <input type='text' value={this.state.username} onChange={this.onUsernameChange}/> <br/>","                Password: <input type='password' value={this.state.password} onChange={this.onPasswordChange}/> <br/>","                    <input type='submit' value='Login' onClick={this.onSubmit}/> <br/>","            </div>","        );","    }","});","","var ClickButton = React.createClass({","    onClick: function(){","        ajax('record_click.php',null, function(response){","            if(response.result === 'success'){","                this.props.setClicks(response.clickCount);","            }","            else if(response.result === 'error'){","                alert('Error: ' + response.msg);","            }","            else{","                alert('Response message has no result attribute');","            }","        }.bind(this));","    },","    render: function(){","        return <input type='submit' value='Click Me' onClick = {this.onClick}/>;","    }","});","","var LoadingScreen = React.createClass({","    render: function(){","        return <div>Loading...</div>;","    }","});","","var ClickScreen = React.createClass({","    render: function(){","        return(","            <div>","                <div>Click count: {this.props.clickCount}</div>","                <ClickButton setClicks={this.props.setClicks}/>","                <LogoutButton onLogout={this.props.onLogout}/>","            </div>","        );","    }","    ","});","","var LoginScreen = React.createClass({","    render: function(){","        return <LoginForm onLogin={this.props.onLogin}/>;","    }","});","","var App = React.createClass({","    getInitialState: function(){","        return {","            loading: true,","            clickCount: null","        };","    },","    componentDidMount: function(){","        ajax('init.php',null,function(response){","            if(response.result === 'error'){","                alert('Error: ' + response.msg);","            }","            else if(response.result === 'loggedIn'){","                this.setState({clickCount: response.clickCount,loading: false});","            }","            else if(response.result === 'notLoggedIn'){","                this.setState({clickCount: null,loading: false});","            }","            else{","                alert('Something went wrong');","            }","        }.bind(this));  ","    },","    onLogin: function(clickCount){","        this.setState(","            {clickCount: clickCount}  ","        );  ","    },","    onLogout: function(){","        this.setState(","            {clickCount: null}  ","        );  ","    },","    setClicks: function(clickCount){","        this.setState({clickCount: clickCount});","    },","    render: function() {","        if(this.state.loading){","            return<LoadingScreen />;","        }","        else if(this.state.clickCount === null){","            return <LoginScreen onLogin={this.onLogin}/>;","        }","        else{","            return(","                <ClickScreen ","                    setClicks={this.setClicks}","                    onLogout={this.onLogout} ","                    clickCount={this.state.clickCount}","                />","            );","        }","    }","});","","ReactDOM.render(<App />, document.getElementById('content'));"]}],[{"start":{"row":4,"column":0},"end":{"row":42,"column":3},"action":"remove","lines":["var UserList = React.createClass({","    getInitialState: function() {","        return {","           users: [],","           username: null,","           blogtext: null ","        }; ","    },","    componentDidMount: function() {","        ajax('getUsers.php', null, function(response){","            if (response.result === 'failure') {","                console.log(\"Data was not received.\");","                alert('No users exist.');","            } else if (response.result === 'success') {","                console.log(\"Data was received.\");","               this.setState({users: response.usernames});","            }","        }.bind(this));","    },","    displayText: function(e) {","        ajax(\"viewblog.php\", {username: e.target.value}, function(response) {","            if (response.result === 'failure') {","                alert(\"Data couldn't be found\");","            } else if (response.result === 'success') {","                this.setState({blogtext : response.blog_text});","                ","                return <p>{this.state.blog_text}</p>;","            }","        }.bind(this));","    },","    render: function() {","            var namesList = this.state.users.map(function(name, index){","                \t\t\treturn (<li key={ index }><button value={name}>{name}</button></li>);","              \t\t\t});","                        ","            return  <ul>{ namesList }</ul>;","            ","    }","});"],"id":4322},{"start":{"row":4,"column":0},"end":{"row":42,"column":3},"action":"insert","lines":["var UserList = React.createClass({","    getInitialState: function() {","        return {","           users: [],","           username: null,","           blogtext: null ","        }; ","    },","    componentDidMount: function() {","        ajax('getUsers.php', null, function(response){","            if (response.result === 'failure') {","                console.log(\"Data was not received.\");","                alert('No users exist.');","            } else if (response.result === 'success') {","                console.log(\"Data was received.\");","               this.setState({users: response.usernames});","            }","        }.bind(this));","    },","    displayText: function(e) {","        ajax(\"viewblog.php\", {username: e.target.value}, function(response) {","            if (response.result === 'failure') {","                alert(\"Data couldn't be found\");","            } else if (response.result === 'success') {","                this.setState({blogtext : response.blog_text});","                ","                return <p>{this.state.blog_text}</p>;","            }","        }.bind(this));","    },","    render: function() {","            var namesList = this.state.users.map(function(name, index){","                \t\t\treturn (<li key={ index }><button value={name}>{name}</button></li>);","              \t\t\t});","                        ","            return  <ul>{ namesList }</ul>;","            ","    }","});"]}],[{"start":{"row":97,"column":17},"end":{"row":98,"column":0},"action":"insert","lines":["",""],"id":4323},{"start":{"row":98,"column":0},"end":{"row":98,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":98,"column":12},"end":{"row":98,"column":13},"action":"insert","lines":["<"],"id":4324}],[{"start":{"row":98,"column":12},"end":{"row":98,"column":13},"action":"remove","lines":["<"],"id":4325}],[{"start":{"row":98,"column":12},"end":{"row":98,"column":16},"action":"insert","lines":["    "],"id":4326}],[{"start":{"row":98,"column":16},"end":{"row":98,"column":17},"action":"insert","lines":["<"],"id":4327}],[{"start":{"row":98,"column":17},"end":{"row":98,"column":18},"action":"insert","lines":["U"],"id":4328}],[{"start":{"row":98,"column":18},"end":{"row":98,"column":19},"action":"insert","lines":["s"],"id":4329}],[{"start":{"row":98,"column":19},"end":{"row":98,"column":20},"action":"insert","lines":["e"],"id":4330}],[{"start":{"row":98,"column":20},"end":{"row":98,"column":21},"action":"insert","lines":["r"],"id":4331}],[{"start":{"row":98,"column":21},"end":{"row":98,"column":22},"action":"insert","lines":["L"],"id":4332}],[{"start":{"row":98,"column":22},"end":{"row":98,"column":23},"action":"insert","lines":["i"],"id":4333}],[{"start":{"row":98,"column":23},"end":{"row":98,"column":24},"action":"insert","lines":["s"],"id":4334}],[{"start":{"row":98,"column":24},"end":{"row":98,"column":25},"action":"insert","lines":["t"],"id":4335}],[{"start":{"row":98,"column":25},"end":{"row":98,"column":26},"action":"insert","lines":[">"],"id":4336}],[{"start":{"row":98,"column":25},"end":{"row":98,"column":26},"action":"remove","lines":[">"],"id":4337}],[{"start":{"row":98,"column":25},"end":{"row":98,"column":26},"action":"insert","lines":["/"],"id":4338}],[{"start":{"row":98,"column":26},"end":{"row":98,"column":27},"action":"insert","lines":[">"],"id":4339}],[{"start":{"row":57,"column":17},"end":{"row":58,"column":0},"action":"insert","lines":["",""],"id":4340},{"start":{"row":58,"column":0},"end":{"row":58,"column":12},"action":"insert","lines":["            "]}],[{"start":{"row":58,"column":12},"end":{"row":58,"column":16},"action":"insert","lines":["    "],"id":4341}],[{"start":{"row":58,"column":16},"end":{"row":58,"column":17},"action":"insert","lines":["<"],"id":4342}],[{"start":{"row":58,"column":17},"end":{"row":58,"column":18},"action":"insert","lines":["U"],"id":4343}],[{"start":{"row":58,"column":18},"end":{"row":58,"column":19},"action":"insert","lines":["s"],"id":4344}],[{"start":{"row":58,"column":19},"end":{"row":58,"column":20},"action":"insert","lines":["e"],"id":4345}],[{"start":{"row":58,"column":20},"end":{"row":58,"column":21},"action":"insert","lines":["r"],"id":4346}],[{"start":{"row":58,"column":21},"end":{"row":58,"column":22},"action":"insert","lines":["L"],"id":4347}],[{"start":{"row":58,"column":22},"end":{"row":58,"column":23},"action":"insert","lines":["i"],"id":4348}],[{"start":{"row":58,"column":23},"end":{"row":58,"column":24},"action":"insert","lines":["s"],"id":4349}],[{"start":{"row":58,"column":24},"end":{"row":58,"column":25},"action":"insert","lines":["t"],"id":4350}],[{"start":{"row":58,"column":25},"end":{"row":58,"column":26},"action":"insert","lines":[">"],"id":4351}],[{"start":{"row":58,"column":25},"end":{"row":58,"column":26},"action":"remove","lines":[">"],"id":4352}],[{"start":{"row":58,"column":25},"end":{"row":58,"column":26},"action":"insert","lines":["/"],"id":4353}],[{"start":{"row":58,"column":26},"end":{"row":58,"column":27},"action":"insert","lines":[">"],"id":4354}],[{"start":{"row":110,"column":14},"end":{"row":110,"column":26},"action":"remove","lines":["record_click"],"id":4358},{"start":{"row":110,"column":14},"end":{"row":110,"column":15},"action":"insert","lines":["v"]}],[{"start":{"row":110,"column":15},"end":{"row":110,"column":16},"action":"insert","lines":["i"],"id":4359}],[{"start":{"row":110,"column":16},"end":{"row":110,"column":17},"action":"insert","lines":["e"],"id":4360}],[{"start":{"row":110,"column":17},"end":{"row":110,"column":18},"action":"insert","lines":["w"],"id":4361}],[{"start":{"row":110,"column":18},"end":{"row":110,"column":19},"action":"insert","lines":["b"],"id":4362}],[{"start":{"row":110,"column":19},"end":{"row":110,"column":20},"action":"insert","lines":["l"],"id":4363}],[{"start":{"row":110,"column":20},"end":{"row":110,"column":21},"action":"insert","lines":["o"],"id":4364}],[{"start":{"row":110,"column":20},"end":{"row":110,"column":21},"action":"remove","lines":["o"],"id":4410}],[{"start":{"row":110,"column":19},"end":{"row":110,"column":20},"action":"remove","lines":["l"],"id":4411}],[{"start":{"row":110,"column":18},"end":{"row":110,"column":19},"action":"remove","lines":["b"],"id":4412}],[{"start":{"row":110,"column":17},"end":{"row":110,"column":18},"action":"remove","lines":["w"],"id":4413}],[{"start":{"row":110,"column":16},"end":{"row":110,"column":17},"action":"remove","lines":["e"],"id":4414}],[{"start":{"row":110,"column":15},"end":{"row":110,"column":16},"action":"remove","lines":["i"],"id":4415}],[{"start":{"row":110,"column":14},"end":{"row":110,"column":15},"action":"remove","lines":["v"],"id":4416}],[{"start":{"row":110,"column":14},"end":{"row":110,"column":15},"action":"insert","lines":["v"],"id":4417}],[{"start":{"row":110,"column":15},"end":{"row":110,"column":16},"action":"insert","lines":["i"],"id":4418}],[{"start":{"row":110,"column":16},"end":{"row":110,"column":17},"action":"insert","lines":["e"],"id":4419}],[{"start":{"row":110,"column":17},"end":{"row":110,"column":18},"action":"insert","lines":["w"],"id":4420}],[{"start":{"row":110,"column":18},"end":{"row":110,"column":19},"action":"insert","lines":["b"],"id":4421}],[{"start":{"row":110,"column":19},"end":{"row":110,"column":20},"action":"insert","lines":["l"],"id":4422}],[{"start":{"row":110,"column":20},"end":{"row":110,"column":21},"action":"insert","lines":["o"],"id":4423}],[{"start":{"row":110,"column":21},"end":{"row":110,"column":22},"action":"insert","lines":["g"],"id":4424}],[{"start":{"row":164,"column":41},"end":{"row":164,"column":42},"action":"remove","lines":["l"],"id":4425}],[{"start":{"row":164,"column":41},"end":{"row":164,"column":42},"action":"insert","lines":["L"],"id":4426}],[{"start":{"row":165,"column":52},"end":{"row":165,"column":62},"action":"remove","lines":["clickCount"],"id":4427},{"start":{"row":165,"column":52},"end":{"row":165,"column":53},"action":"insert","lines":["b"]}],[{"start":{"row":165,"column":53},"end":{"row":165,"column":54},"action":"insert","lines":["l"],"id":4428}],[{"start":{"row":165,"column":54},"end":{"row":165,"column":55},"action":"insert","lines":["o"],"id":4429}],[{"start":{"row":165,"column":55},"end":{"row":165,"column":56},"action":"insert","lines":["g"],"id":4430}],[{"start":{"row":165,"column":56},"end":{"row":165,"column":57},"action":"insert","lines":["t"],"id":4431}],[{"start":{"row":165,"column":57},"end":{"row":165,"column":58},"action":"insert","lines":["e"],"id":4432}],[{"start":{"row":165,"column":58},"end":{"row":165,"column":59},"action":"insert","lines":["x"],"id":4433}],[{"start":{"row":165,"column":59},"end":{"row":165,"column":60},"action":"insert","lines":["t"],"id":4434}]]},"ace":{"folds":[],"scrolltop":2209.5,"scrollleft":0,"selection":{"start":{"row":165,"column":60},"end":{"row":165,"column":60},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":156,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1465789167000,"hash":"5688c8597818c2233ff2e8f2e2ccfa29c986c614"}